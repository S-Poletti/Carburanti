name: Esegui script prezzi carburanti

on:
  schedule:
    # Tutti i giorni alle 07:05 UTC â‰ˆ 08:05 in Italia (in inverno)
    - cron: "5 7 * * *"
  workflow_dispatch:  # ti permette di lanciarlo a mano

jobs:
  run-r-script:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Setup R
        uses: r-lib/actions/setup-r@v2

      - name: Install required packages
        run: |
          Rscript -e 'install.packages(c("tidyverse","dplyr","stringr","data.table","readr","httr","datawrapper"), repos="https://cloud.r-project.org")'

      - name: Run carburanti script
        run: |
          Rscript script/mio_script_DATAWRAPPER.R
